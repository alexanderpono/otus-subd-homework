-- MySQL Script generated by MySQL Workbench
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';


USE `blog_db`;


INSERT INTO user(id, name, password, blocked) 
VALUES 
	(1, 'user1', 123123, false),  
	(2, 'user2', 123123, false),  
	(3, 'user3', 123123, false),
	(4, 'user4', 123123, false),
	(5, 'user5', 123123, false),
	(6, 'user6', 123123, false)
;

INSERT INTO post(id, post, dt, title, author_user_id, last_edit_dt, lead1, visible, referenced_post_id, deleted) 
VALUES 
	(1, 'text1', '2018-11-01', 'Супер название статьи 1', 1, '2018-11-01', 'Вводный текст к статье 1', TRUE, 0, FALSE),
	(2, 'text2', '2018-11-01', 'Супер название статьи 2', 2, '2018-11-01', 'Вводный текст к статье 2', TRUE, 0, FALSE),
	(3, 'text3', '2018-11-01', 'Супер название статьи 3', 2, '2018-11-01', 'Вводный текст к статье 3', TRUE, 0, FALSE),
	(4, 'text4', '2018-11-02', 'Супер название статьи 4', 1, '2018-11-02', 'Вводный текст к статье 4', TRUE, 0, FALSE),
	(5, 'text5', '2018-11-02', 'Супер название статьи 5', 1, '2018-11-02', 'Вводный текст к статье 5', TRUE, 0, TRUE),
	(6, 'text6', '2018-11-01', 'Супер название статьи 6', 2, '2018-11-01', 'Вводный текст к статье 6', TRUE, 0, FALSE),
	(7, 'text7', '2018-11-02', 'Супер название статьи 7', 3, '2018-11-02', 'Вводный текст к статье 7', TRUE, 0, FALSE),
	(8, 'text8', '2018-11-01', 'Супер название статьи 8', 1, '2018-11-01', 'Вводный текст к статье 8', TRUE, 0, FALSE),
	(9, 'text9', '2018-11-01', 'Супер название статьи 9', 2, '2018-11-01', 'Вводный текст к статье 9', TRUE, 0, FALSE),
	(10, 'text10', '2018-11-01', 'Супер название статьи 10', 3, '2018-11-01', 'Вводный текст к статье 10', TRUE, 0, FALSE),
	(11, 'text11', '2018-11-02', 'Супер название статьи 11', 4, '2018-11-02', 'Вводный текст к статье 11', TRUE, 0, FALSE)
;

INSERT INTO picture(id, post_id, file_name, caption, deleted) 
VALUES 
	(1, 1, '1.jpg', 'Золотая осень', FALSE),
	(2, 2, '12.jpg', 'Котик', FALSE)
;

INSERT INTO comment(id, post_id, comment_text, user_id, deleted) 
VALUES 
	(1, 1, 'Красивое фото!', 2, FALSE),
	(2, 1, 'А мне не нравится', 3, FALSE),
	(3, 1, 'А мне - нравится!', 2, FALSE)
;

INSERT INTO comment(post_id, comment_text, user_id, deleted)
SELECT post_id, comment_text, user_id, deleted 
FROM comment
WHERE post_id='1';

INSERT INTO comment(post_id, comment_text, user_id, deleted)
SELECT post_id, comment_text, user_id, deleted 
FROM comment
WHERE post_id='1';

UPDATE comment
SET post_id = '2'
WHERE id IN(3,4,5,6);

UPDATE comment
SET post_id = '3'
WHERE id > 6;

UPDATE comment
SET deleted=TRUE
WHERE id IN(11,12);

INSERT INTO `like`(id, post_id, user_id, deleted) 
VALUES 
	(1, 1, 2, FALSE),
	(2, 2, 3, FALSE),
	(3, 2, 2, FALSE),
	(4, 1, 1, FALSE),
	(5, 4, 1, FALSE),
	(6, 1, 3, FALSE),
	(7, 2, 4, FALSE),
	(8, 1, 5, FALSE),
	(9, 4, 5, FALSE),
	(10, 1, 6, FALSE),
	(11, 5, 5, FALSE),
	(12, 6, 5, FALSE),
	(13, 7, 6, FALSE)
;

INSERT INTO user_viewed_post(id, post_id, user_id, views_no, last_view_dt, deleted) 
VALUES 
	(1, 1, 1,	 5, '2018-11-10', FALSE),
	(2, 1, 2, 3, '2018-11-11', FALSE),
	(3, 1, 3, 2, '2018-11-10', FALSE),
	(4, 2, 1, 2, '2018-11-10', FALSE),
	(5, 2, 2, 4, '2018-11-11', FALSE),
	(6, 2, 3, 10, '2018-11-10', FALSE),
	(7, 3, 1, 2, '2018-11-10', FALSE),
	(8, 3, 2, 4, '2018-11-11', FALSE),
	(9, 3, 3, 10, '2018-11-10', FALSE),
	(10, 4, 1, 2, '2018-11-10', FALSE),
	(11, 4, 2, 4, '2018-11-11', FALSE),
	(12, 5, 6, 5, '2018-11-10', FALSE),
	(13, 5, 5, 8, '2018-11-10', FALSE),
	(14, 6, 4, 7, '2018-11-10', FALSE),
	(15, 7, 3, 2, '2018-11-10', FALSE),
	(16, 7, 2, 5, '2018-11-10', FALSE)
;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;




